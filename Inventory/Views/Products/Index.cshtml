
@{
    ViewBag.Title = ":: Products ::";
    Layout = "~/Views/Shared/MainMaster.cshtml";
}

@section css{
    <!-- Bootstrap -->
    <link href="../vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="../vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="../vendors/nprogress/nprogress.css" rel="stylesheet">
    <!-- iCheck -->
    <link href="../vendors/iCheck/skins/flat/green.css" rel="stylesheet">
    <!-- bootstrap-progressbar -->
    <link href="../vendors/bootstrap-progressbar/css/bootstrap-progressbar-3.3.4.min.css" rel="stylesheet">
    <!-- JQVMap -->
    <link href="../vendors/jqvmap/dist/jqvmap.min.css" rel="stylesheet" />
    <!-- bootstrap-daterangepicker -->
    <link href="../vendors/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet">

    <!-- Custom Theme Style -->
<link href="../build/css/custom.min.css" rel="stylesheet">

<!--- Tabs in Graph Section ---->
<link href="~/Scripts/css/reset.css" rel="stylesheet" />
<link href="~/Scripts/css/dashboardstyles.css" rel="stylesheet" />
}
<div class="container body">
    <div class="main_container">
        <!-- page content -->
        <div class="right_col" role="main">
            <div class="container">
                <form>
                    <div class="row">
                        <div class="form-title col-xs-12 col-md-9">Shop Products</div>
                        <div class="top-bar col-xs-12 col-md-3">
                            @*<button type="button" class="btn btn-primary pull-right invite" id="add-vendor"> <i class="fa fa-plus-circle" aria-hidden="true"></i> Add Product </button>*@
                            <div class="icons pull-right">
                                <i class="fa fa-list-ol fa-lg" aria-hidden="true" id="list-view"></i>
                                <i class="fa fa-th fa-lg" aria-hidden="true" id="grid-view"></i>
                                <i class="fa fa-refresh fa-lg" aria-hidden="true" id="refresh"></i>
                                <i class="fa fa-cog fa-lg" aria-hidden="true" id="settings"></i>
                            </div>
                        </div>
                    </div>
                    <div class="row blocks">
                        <div class="col-md-3 col-sm-6 col-xs-12">
                            <div class="content">
                                <h2>Estimate</h2>
                                <p>Rs&nbsp;10000</p>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-6 col-xs-12">
                            <div class="content">
                                <h2>Unbilled Activity</h2>
                                <p>Rs&nbsp;10000</p>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-6 col-xs-12">
                            <div class="content">
                                <h2>Open Invoice</h2>
                                <p>Rs&nbsp;10000</p>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-6 col-xs-12">
                            <div class="content">
                                <h2>Over Due</h2>
                                <p>Rs&nbsp;10000</p>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12 col-md-2">
                            <div class="row categories">
                                <div class="column col-xs-12 sidebar-offcanvas" id="sidebar">
                                    <ul class="nav" id="menu">
                                        <li class="title"><span class="collapse in">Categories</span></li>
                                        <li><a onclick="loadallproducts()"><span class="collapse in">Meat</span></a></li>
                                        <li><a href="#"><span class="collapse in">Fruits and Vegetables</span></a></li>
                                        <li>
                                            <a href="#" data-target="#item1" data-toggle="collapse" class="" aria-expanded="true"><span class="collapse in">Category Menu <span class="caret"></span></span></a>
                                            <ul class="nav nav-stacked left-submenu collapse in" id="item1" aria-expanded="true">
                                                <li><a href="google.com">View One</a></li>
                                                <li><a href="gmail.com">View Two</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#"><span class="collapse in">Grocery and Staples</span></a></li>
                                        <li><a href="#"><span class="collapse in">Branded Foods </span></a></li>
                                        <li><a href="#"><span class="collapse in">Beverages</span></a></li>
                                        <li><a href="#"><span class="collapse in">Gift Cards</span></a></li>
                                        <li><a href="#"><span class="collapse in">Women's fashion</span></a></li>
                                        <li><a href="#"><span class="collapse in">Men's fashion</span></a></li>
                                        <li><a href="#"><span class="collapse in">PC and Electronics</span></a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-12 col-md-7">
                            @{ Html.RenderAction("allproducts", "Products");}
                        </div>
                        <div class="col-xs-12 col-md-3">
                            <div class="row checkout">
                                <div class="col-xs-12 col-md-12 check-title">
                                    <div class="row">
                                        <div class="col-xs-5 col-md-5 title">Your Order</div>
                                        <div class="col-xs-2 col-md-2 cart-icn">
                                            <i class="fa fa-shopping-cart fa-lg" aria-hidden="true"></i>
                                        </div>
                                        <div class="col-xs-5 col-md-5 cart-total">
                                            Total:<span>000</span>
                                        </div>
                                    </div>
                                </div>
                                <hr>
                                <div class="col-xs-12">
                                    <div class="added-products">
                                    </div>
                                </div>
                                <div class="col-xs-12">
                                    <a class="btn btn-primary" href="/Products/purchaseorder">Generate Product Order</a>
                                    @*<button class="btn btn-primary" type="button">Generate Product Order</button>*@
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <!-- /page content -->
    </div> 
</div>

@section scripts{
    <!-- jQuery lib & Tabs -->
<script src="~/Scripts/js/jquery-3.1.1.min.js"></script>
<script src="~/Scripts/js/main.js"></script>
<script src="~/Scripts/js/modernizr.js"></script>
<!-- jQuery -->
<script src="../vendors/jquery/dist/jquery.min.js"></script>
    
<!-- Bootstrap -->
<script src="../vendors/bootstrap/dist/js/bootstrap.min.js"></script>

<script type="text/javascript">
@*<!------------ List / Grid Views and reload page -------------->*@
  $("#grid-view").click(function(e) {
      $("#productstable").css("display","none");
      $("#productstable1").css("display","block");
});

  $("#list-view").click(function(e) {
      $("#productstable").css("display","block");
      $("#productstable1").css("display","none");
	//location.reload();
});

  $("#refresh").click(function(e) {
    location.reload();
});
//<!------------ List / Grid Views and reload page -------------->

//<!------------ Quantity changes / Prices Multiple -------------->
  $(document).ready(function(e) {
		 var tableprice, divprice, tabletotal, divtotal;
$('.spinner .btn:first-of-type').click(function(){
	var plus, v;
	 v = parseInt($(this).parent("div").prev("input[type='text']").val());
	 //alert("value of v(Plus) IS " + v);
	if(v > 0){
		plus = v + 1;
		$(this).parent("div").prev("input[type='text']").val(plus);
		 tableprice = parseInt($(this).parents(".quantity-changes").nextAll(".product-price").children("span").text());
		 divprice = parseInt($(this).parents(".rate-add").children(".product-price").children("span").text());
		 tabletotal = plus * tableprice;
		 divtotal = plus * divprice;$(this).parents(".quantity-changes").nextAll(".product-price-total").children("span").remove();
		$(this).parents(".quantity-changes").nextAll(".product-price-total").append("<span>" + tabletotal + "</span>");
		$(this).parents(".rate-add").children(".product-price-total").children("span").remove();
		$(this).parents(".rate-add").children(".product-price-total").append("<span>" + divtotal + "</span>");
		}
	});
$('.spinner .btn:last-of-type').click(function(){
	var minus, v;
	 v = parseInt($(this).parent("div").prev("input[type='text']").val());
	//alert("value of V(Minus) IS " + v);
	if(v > 1){
		 minus = v - 1;
		$(this).parent("div").prev("input[type='text']").val(minus);
		 tableprice = parseInt($(this).parents(".quantity-changes").nextAll(".product-price").children("span").text());;
		 divprice = parseInt($(this).parents(".rate-add").children(".product-price").children("span").text());
		 tabletotal = minus * tableprice;
		 divtotal = minus * divprice;$(this).parents(".quantity-changes").nextAll(".product-price-total").children("span").remove();
		$(this).parents(".quantity-changes").nextAll(".product-price-total").append("<span>" + tabletotal + "</span>");
		$(this).parents(".rate-add").children(".product-price-total").children("span").remove();
		$(this).parents(".rate-add").children(".product-price-total").append("<span>" + divtotal + "</span>");
		}
	});
});
//<!------------ Quantity changes / Prices Multiple -------------->

//<!----------- Quantity Add in Right Bar ---------------->
$(".add-to-cart > .btn").click(function(){
	var v = $(this).parents(".rate-add").prevAll("div.product-variation").children("select").children("option:selected").val();
	var txt = $(this).parents(".rate-add").prev("div.empty");
	$(txt).empty().append("<p>" + v + "<p>");
	$(this).parents(".well").clone(true,true).appendTo(".added-products");
	$(".added-products").css("padding","0px 0px 10px");
	});
$(".add-to-cart-table > .btn").click(function(){
  var v = $(this).parent("td.add-to-cart-table").prevAll("td.product-variation").children("select").children("option:selected").val();
  var txt = $(this).parent("td.add-to-cart-table").next("td.empty");
	$(txt).empty().append("<p>" + v + "</p>");
  $(this).parents("tr").clone(true,true).appendTo(".added-products");
  $(".added-products").css("padding","0px 0px 10px");
});
function gototgenerateorder() {
    RedirectToAction("purchaseorder");
}
function vals(){
	var total,totalquantity = 0, productprice, carttotal = 0;
	$(".added-products .spinner input[type='text']").each(function(){
		total = parseInt($(this).val());
		totalquantity = total + totalquantity;
		});
	$(".added-products .product-price-total span").each(function(){
		productprice = parseInt($(this).text());
		carttotal = productprice + carttotal;
		});
	$(".cart-total span").remove();
	$(".cart-total").append("<span>" + carttotal + "</span>");
	$(".cart-icn span").remove();
	$(".cart-icn").append("<span>" + totalquantity + "</span>");

	}

$(".add-to-cart-table > .btn, .add-to-cart > .btn, i.fa-caret-up").click(function(){
	return vals();
	});

$(".remove").click(function(){
	$(this).parents("div.well,tr").remove();
	return vals();
	});
    </script>
    //<!----------- Quantity Add in Right Bar ---------------->
}

